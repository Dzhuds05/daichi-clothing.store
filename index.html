<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daichi Clothing - Asian Aesthetics</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .hero-gradient {
            background: linear-gradient(135deg, #722F37 0%, #8B1538 100%);
        }
        .card-hover {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }
        .animate-fadeIn {
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }
        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .cart-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #ef4444;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .tab-button {
            transition: all 0.3s ease;
        }
        .tab-button.active {
            background: #7c3aed;
            color: white;
        }
        .form-group {
            margin-bottom: 1rem;
        }
        .order-status {
            padding: 0.25rem 0.75rem;
            border-radius: 1rem;
            font-size: 0.75rem;
            font-weight: 600;
        }
        .status-pending { background: #fbbf24; color: #78350f; }
        .status-processing { background: #60a5fa; color: #1e40af; }
        .status-shipped { background: #34d399; color: #065f46; }
        .status-delivered { background: #10b981; color: #064e3b; }
        .status-cancelled { background: #f87171; color: #7f1d1d; }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Navigation -->
    <nav class="bg-white shadow-lg sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <div class="flex items-center space-x-3">
                        <!-- Daichi Logo - Text Only -->
                        <div class="flex flex-col">
                            <h1 class="text-xl font-bold text-gray-800 leading-tight">DAICHI</h1>
                            <p class="text-xs text-gray-600 leading-tight">CLOTHING</p>
                        </div>
                    </div>
                </div>
                
                <div class="hidden md:flex items-center space-x-8">
                    <!-- Language Selector -->
                    <div class="relative">
                        <select id="languageSelector" class="bg-transparent border border-gray-300 rounded px-2 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-red-500">
                            <option value="en">ðŸ‡ºðŸ‡¸ EN</option>
                            <option value="ru">ðŸ‡·ðŸ‡º RU</option>
                            <option value="kz">ðŸ‡°ðŸ‡¿ KZ</option>
                        </select>
                    </div>
                    <a href="#home" class="text-gray-600 hover:text-red-900 transition-colors">Home</a>
                    <a href="#products" class="text-gray-600 hover:text-red-900 transition-colors">Products</a>
                    <a href="#about" class="text-gray-600 hover:text-red-900 transition-colors">About</a>
                    <a href="#contact" class="text-gray-600 hover:text-red-900 transition-colors">Contact</a>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="relative">
                        <input type="text" id="searchInput" placeholder="Search products..." 
                               class="pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500">
                        <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                    </div>
                    
                    <div class="relative">
                        <button id="authBtn" class="text-gray-600 hover:text-purple-600 transition-colors">
                            <i class="fas fa-user text-xl"></i>
                        </button>
                        <div id="userDropdown" class="absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 hidden">
                            <div id="userDropdownContent"></div>
                        </div>
                    </div>
                    
                    <button id="cartBtn" class="relative text-gray-600 hover:text-purple-600 transition-colors">
                        <i class="fas fa-shopping-cart text-xl"></i>
                        <span id="cartCount" class="cart-badge">0</span>
                    </button>
                    
                    <button id="mobileMenuBtn" class="md:hidden text-gray-600">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Mobile Menu -->
        <div id="mobileMenu" class="md:hidden hidden bg-white border-t">
            <div class="px-4 py-2 space-y-2">
                <a href="#home" class="block py-2 text-gray-600 hover:text-red-900">Home</a>
                <a href="#products" class="block py-2 text-gray-600 hover:text-red-900">Products</a>
                <a href="#about" class="block py-2 text-gray-600 hover:text-red-900">About</a>
                <a href="#contact" class="block py-2 text-gray-600 hover:text-red-900">Contact</a>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section id="home" class="hero-gradient text-white py-20">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <div class="mb-6">
                <!-- Text-based Logo -->
                <div class="flex justify-center mb-6">
                    <div class="text-center">
                        <h1 class="text-6xl font-bold text-white mb-2">DAICHI</h1>
                        <p class="text-xl text-white tracking-widest">CLOTHING</p>
                    </div>
                </div>
            </div>
            <p class="text-xl md:text-2xl mb-8 animate-fadeIn" data-en="Discover elegant designs inspired by Asian culture and craftsmanship" data-ru="ÐžÑ‚ÐºÑ€Ð¾Ð¹Ñ‚Ðµ Ð´Ð»Ñ ÑÐµÐ±Ñ ÑÐ»ÐµÐ³Ð°Ð½Ñ‚Ð½Ñ‹Ðµ Ð´Ð¸Ð·Ð°Ð¹Ð½Ñ‹, Ð²Ð´Ð¾Ñ…Ð½Ð¾Ð²Ð»ÐµÐ½Ð½Ñ‹Ðµ Ð°Ð·Ð¸Ð°Ñ‚ÑÐºÐ¾Ð¹ ÐºÑƒÐ»ÑŒÑ‚ÑƒÑ€Ð¾Ð¹ Ð¸ Ð¼Ð°ÑÑ‚ÐµÑ€ÑÑ‚Ð²Ð¾Ð¼" data-kz="ÐÐ·Ð¸Ñ Ð¼Ó™Ð´ÐµÐ½Ð¸ÐµÑ‚Ñ– Ð¼ÐµÐ½ Ò›Ð¾Ð»Ó©Ð½ÐµÑ€Ñ–Ð½ÐµÐ½ ÑˆÐ°Ð±Ñ‹Ñ‚Ñ‚Ð°Ð½Ò“Ð°Ð½ ÑÐ»ÐµÐ³Ð°Ð½Ñ‚Ñ‚Ñ‹ Ð´Ð¸Ð·Ð°Ð¹Ð½Ð´Ð°Ñ€Ð´Ñ‹ Ð°ÑˆÑ‹Ò£Ñ‹Ð·">Discover elegant designs inspired by Asian culture and craftsmanship</p>
            <button onclick="scrollToProducts()" class="bg-white text-red-900 px-8 py-3 rounded-full font-semibold hover:bg-gray-100 transition-colors animate-fadeIn" data-en="Explore Collection" data-ru="Ð˜Ð·ÑƒÑ‡Ð¸Ñ‚ÑŒ ÐºÐ¾Ð»Ð»ÐµÐºÑ†Ð¸ÑŽ" data-kz="Ð–Ð¸Ð½Ð°Ò›Ñ‚Ñ‹ Ð·ÐµÑ€Ñ‚Ñ‚ÐµÑƒ">
                Explore Collection
            </button>
        </div>
    </section>

    <!-- Featured Products Section -->
    <section class="py-16 bg-white">
        <div class="max-w-7xl mx-auto px-4">
            <h2 class="text-3xl font-bold text-center mb-12 text-gray-800">Featured Products</h2>
            <div id="featuredProducts" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                <!-- Featured products will be inserted here -->
            </div>
        </div>
    </section>

    <!-- Products Section -->
    <section id="products" class="py-16 bg-gray-50">
        <div class="max-w-7xl mx-auto px-4">
                    <h2 class="text-3xl font-bold text-center mb-12 text-gray-800" data-en="Our Collection" data-ru="ÐÐ°ÑˆÐ° ÐºÐ¾Ð»Ð»ÐµÐºÑ†Ð¸Ñ" data-kz="Ð‘Ñ–Ð·Ð´Ñ–Ò£ Ð¶Ð¸Ð½Ð°Ò›">Our Collection</h2>
            
            <!-- Filters -->
            <div class="mb-8 flex flex-wrap justify-center gap-4">
                <button class="filter-btn active px-6 py-2 rounded-full bg-red-900 text-white hover:bg-red-800 transition-colors" data-category="all" data-en="All Products" data-ru="Ð’ÑÐµ Ñ‚Ð¾Ð²Ð°Ñ€Ñ‹" data-kz="Ð‘Ð°Ñ€Ð»Ñ‹Ò› Ó©Ð½Ñ–Ð¼Ð´ÐµÑ€">
                    All Products
                </button>
                <button class="filter-btn px-6 py-2 rounded-full bg-white text-gray-700 hover:bg-red-900 hover:text-white transition-colors" data-category="dresses" data-en="Dresses" data-ru="ÐŸÐ»Ð°Ñ‚ÑŒÑ" data-kz="ÐšÓ©Ð¹Ð»ÐµÐºÑ‚ÐµÑ€">
                    Dresses
                </button>
                <button class="filter-btn px-6 py-2 rounded-full bg-white text-gray-700 hover:bg-red-900 hover:text-white transition-colors" data-category="capes" data-en="Capes" data-ru="ÐÐ°ÐºÐ¸Ð´ÐºÐ¸" data-kz="Ð–ÐµÐ¹Ð´ÐµÐ»ÐµÑ€">
                    Capes
                </button>
                <button class="filter-btn px-6 py-2 rounded-full bg-white text-gray-700 hover:bg-red-900 hover:text-white transition-colors" data-category="suits" data-en="Suits" data-ru="ÐšÐ¾ÑÑ‚ÑŽÐ¼Ñ‹" data-kz="ÐšÐ¾ÑÑ‚ÑŽÐ¼Ð´ÐµÑ€">
                    Suits
                </button>
                <button class="filter-btn px-6 py-2 rounded-full bg-white text-gray-700 hover:bg-red-900 hover:text-white transition-colors" data-category="bestsellers" data-en="Bestsellers" data-ru="Ð¥Ð¸Ñ‚Ñ‹ Ð¿Ñ€Ð¾Ð´Ð°Ð¶" data-kz="Ð•Ò£ ÐºÓ©Ð¿ ÑÐ°Ñ‚Ñ‹Ð»Ð°Ñ‚Ñ‹Ð½Ð´Ð°Ñ€">
                    Bestsellers
                </button>
            </div>
            
            <!-- Product Grid -->
            <div id="productGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8">
                <!-- Products will be inserted here -->
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section id="about" class="py-16 bg-white">
        <div class="max-w-7xl mx-auto px-4">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
                <div>
                    <h2 class="text-3xl font-bold mb-6 text-gray-800" data-en="About Daichi Clothing" data-ru="Ðž Daichi Clothing" data-kz="Daichi Clothing Ñ‚ÑƒÑ€Ð°Ð»Ñ‹">About Daichi Clothing</h2>
                    <p class="text-gray-600 mb-6">
                        We're passionate about bringing you authentic Asian aesthetics through carefully crafted clothing. 
                        Our designs blend traditional Asian elements with contemporary fashion, creating pieces that honor 
                        cultural heritage while embracing modern style.
                    </p>
                    <p class="text-gray-600 mb-6">
                        From elegant traditional-inspired dresses to modern interpretations of classic Asian garments, 
                        each piece tells a story of craftsmanship and cultural appreciation.
                    </p>
                        <div class="grid grid-cols-3 gap-4 text-center">
                        <div>
                            <div class="text-2xl font-bold text-red-900">20+</div>
                            <div class="text-gray-600">Unique Designs</div>
                        </div>
                        <div>
                            <div class="text-2xl font-bold text-red-900">1k+</div>
                            <div class="text-gray-600">Happy Customers</div>
                        </div>
                        <div>
                            <div class="text-2xl font-bold text-red-900">100%</div>
                            <div class="text-gray-600">Authentic</div>
                        </div>
                    </div>
                </div>
                <div class="bg-gray-200 h-96 rounded-lg flex items-center justify-center">
                    <div class="text-center text-gray-400">
                        <i class="fas fa-image text-6xl mb-4"></i>
                        <p>Brand Story Image</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="py-16 bg-gray-50">
        <div class="max-w-7xl mx-auto px-4">
                    <h2 class="text-3xl font-bold text-center mb-12 text-gray-800" data-en="Get In Touch" data-ru="Ð¡Ð²ÑÐ·Ð°Ñ‚ÑŒÑÑ Ñ Ð½Ð°Ð¼Ð¸" data-kz="Ð‘Ñ–Ð· Ð±ÐµÐ½ Ð±Ð°Ð¹Ð»Ð°Ð½Ñ‹ÑÑ‹Ò£Ñ‹Ð·">Get In Touch</h2>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
                <div>
                    <h3 class="text-xl font-semibold mb-4">Contact Information</h3>
                    <div class="space-y-4">
                        <div class="flex items-center">
                            <i class="fas fa-map-marker-alt text-red-900 w-6"></i>
                            <span class="ml-3">Almaty, Kazakhstan</span>
                        </div>
                        <div class="flex items-center">
                            <i class="fas fa-envelope text-red-900 w-6"></i>
                            <span class="ml-3">hello@daichiclothing.com</span>
                        </div>
                        <div class="flex items-center">
                            <i class="fab fa-instagram text-red-900 w-6"></i>
                            <a href="https://instagram.com/daichi.clothing" target="_blank" class="ml-3 hover:text-red-900 transition-colors">@daichi.clothing</a>
                        </div>
                        <div class="flex items-center">
                            <i class="fab fa-whatsapp text-red-900 w-6"></i>
                            <span class="ml-3">+7 776 843 27 85</span>
                        </div>
                    </div>
                </div>
                <div>
                    <form class="space-y-4">
                        <input type="text" placeholder="Your Name" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500" data-placeholder-en="Your Name" data-placeholder-ru="Ð’Ð°ÑˆÐµ Ð¸Ð¼Ñ" data-placeholder-kz="Ð¡Ñ–Ð·Ð´Ñ–Ò£ Ð°Ñ‚Ñ‹Ò£Ñ‹Ð·">
                        <input type="email" placeholder="Your Email" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500" data-placeholder-en="Your Email" data-placeholder-ru="Ð’Ð°Ñˆ email" data-placeholder-kz="Ð¡Ñ–Ð·Ð´Ñ–Ò£ email">
                        <textarea placeholder="Your Message" rows="4" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500" data-placeholder-en="Your Message" data-placeholder-ru="Ð’Ð°ÑˆÐµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ" data-placeholder-kz="Ð¡Ñ–Ð·Ð´Ñ–Ò£ Ñ…Ð°Ð±Ð°Ñ€Ñ‹Ò£Ñ‹Ð·"></textarea>
                        <button type="submit" class="w-full bg-red-900 text-white py-3 rounded-lg hover:bg-red-800 transition-colors" data-en="Send Message" data-ru="ÐžÑ‚Ð¿Ñ€Ð°Ð²Ð¸Ñ‚ÑŒ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ" data-kz="Ð¥Ð°Ð±Ð°Ñ€ Ð¶Ñ–Ð±ÐµÑ€Ñƒ">
                            Send Message
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-12">
        <div class="max-w-7xl mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div>
                    <h3 class="text-xl font-bold mb-4">Daichi Clothing</h3>
                    <p class="text-gray-400">Authentic Asian aesthetics meets contemporary fashion.</p>
                </div>
                <div>
                    <h4 class="font-semibold mb-4">Quick Links</h4>
                    <ul class="space-y-2 text-gray-400">
                        <li><a href="#home" class="hover:text-white transition-colors">Home</a></li>
                        <li><a href="#products" class="hover:text-white transition-colors">Products</a></li>
                        <li><a href="#about" class="hover:text-white transition-colors">About</a></li>
                        <li><a href="#contact" class="hover:text-white transition-colors">Contact</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold mb-4">Support</h4>
                    <ul class="space-y-2 text-gray-400">
                        <li><a href="#" class="hover:text-white transition-colors">Shipping Info</a></li>
                        <li><a href="#" class="hover:text-white transition-colors">Returns</a></li>
                        <li><a href="#" class="hover:text-white transition-colors">Size Guide</a></li>
                        <li><a href="#" class="hover:text-white transition-colors">FAQ</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold mb-4">Follow Us</h4>
                    <div class="flex space-x-4">
                        <a href="#" class="text-gray-400 hover:text-white transition-colors">
                            <i class="fab fa-facebook text-xl"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white transition-colors">
                            <i class="fab fa-instagram text-xl"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white transition-colors">
                            <i class="fab fa-twitter text-xl"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white transition-colors">
                            <i class="fab fa-pinterest text-xl"></i>
                        </a>
                    </div>
                </div>
            </div>
            <div class="border-t border-gray-700 mt-8 pt-8 text-center text-gray-400">
                <p>&copy; 2025 Daichi Clothing - Asian Aesthetics. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Cart Modal -->
    <div id="cartModal" class="modal">
        <div class="bg-white rounded-lg max-w-2xl mx-4 w-full max-h-[90vh] overflow-y-auto">
            <div class="p-6 border-b">
                <div class="flex justify-between items-center">
                    <h2 class="text-2xl font-bold">Shopping Cart</h2>
                    <button id="closeCartModal" class="text-gray-500 hover:text-gray-700">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
            </div>
            <div id="cartItems" class="p-6">
                <!-- Cart items will be inserted here -->
            </div>
            <div class="p-6 border-t">
                <div class="flex justify-between items-center mb-4">
                    <span class="text-xl font-semibold">Total: $<span id="cartTotal">0.00</span></span>
                </div>
                <button id="checkoutBtn" class="w-full bg-purple-600 text-white py-3 rounded-lg hover:bg-purple-700 transition-colors">
                    Proceed to Checkout
                </button>
            </div>
        </div>
    </div>

    <!-- Product Detail Modal -->
    <div id="productModal" class="modal">
        <div class="bg-white rounded-lg max-w-4xl mx-4 w-full max-h-[90vh] overflow-y-auto">
            <div class="p-6 border-b">
                <div class="flex justify-between items-center">
                    <h2 id="modalProductName" class="text-2xl font-bold"></h2>
                    <button id="closeProductModal" class="text-gray-500 hover:text-gray-700">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
            </div>
            <div class="p-6">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div>
                        <div id="modalProductImage" class="bg-gray-200 h-96 rounded-lg flex items-center justify-center mb-4">
                            <i class="fas fa-image text-gray-400 text-6xl"></i>
                        </div>
                    </div>
                    <div>
                        <div id="modalProductPrice" class="text-3xl font-bold text-purple-600 mb-4"></div>
                        <div id="modalProductDescription" class="text-gray-600 mb-6"></div>
                        
                        <div class="mb-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Size</label>
                            <select id="modalProductSize" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500">
                                <option value="">Select Size</option>
                            </select>
                        </div>
                        
                        <div class="mb-6">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Color</label>
                            <div id="modalProductColors" class="flex gap-2">
                                <!-- Color options will be inserted here -->
                            </div>
                        </div>
                        
                        <button id="addToCartBtn" class="w-full bg-red-900 text-white py-3 rounded-lg hover:bg-red-800 transition-colors">
                            Add to Cart
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Auth Modal -->
    <div id="authModal" class="modal">
        <div class="bg-white rounded-lg max-w-md mx-4 w-full">
            <div class="p-6 border-b">
                <div class="flex justify-between items-center">
                    <h2 id="authModalTitle" class="text-2xl font-bold">Login</h2>
                    <button id="closeAuthModal" class="text-gray-500 hover:text-gray-700">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
            </div>
            <div class="p-6">
                <form id="authForm">
                    <div class="form-group">
                        <input type="email" id="authEmail" placeholder="Email" required
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                    </div>
                    <div class="form-group">
                        <input type="password" id="authPassword" placeholder="Password" required
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                    </div>
                    <div id="authNameField" class="form-group hidden">
                        <input type="text" id="authName" placeholder="Full Name"
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                    </div>
                    <button type="submit" id="authSubmitBtn" class="w-full bg-purple-600 text-white py-3 rounded-lg hover:bg-purple-700 transition-colors">
                        Login
                    </button>
                </form>
                <div class="mt-6 text-center">
                    <button id="authToggle" class="text-purple-600 hover:text-purple-700">
                        Don't have an account? Sign up
                    </button>
                    <div class="mt-2">
                        <button id="forgotPassword" class="text-sm text-gray-600 hover:text-purple-600">
                            Forgot your password?
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Password Reset Modal -->
    <div id="passwordResetModal" class="modal">
        <div class="bg-white rounded-lg max-w-md mx-4 w-full">
            <div class="p-6 border-b">
                <div class="flex justify-between items-center">
                    <h2 class="text-2xl font-bold">Reset Password</h2>
                    <button id="closePasswordResetModal" class="text-gray-500 hover:text-gray-700">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
            </div>
            <div class="p-6">
                <p class="text-gray-600 mb-4">Enter your email address and we'll send you a link to reset your password.</p>
                <form id="passwordResetForm">
                    <div class="form-group">
                        <input type="email" id="resetEmail" placeholder="Email" required
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                    </div>
                    <button type="submit" class="w-full bg-purple-600 text-white py-3 rounded-lg hover:bg-purple-700 transition-colors">
                        Send Reset Link
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- User Profile Modal -->
    <div id="profileModal" class="modal">
        <div class="bg-white rounded-lg max-w-4xl mx-4 w-full max-h-[90vh] overflow-y-auto">
            <div class="p-6 border-b">
                <div class="flex justify-between items-center">
                    <h2 class="text-2xl font-bold">My Account</h2>
                    <button id="closeProfileModal" class="text-gray-500 hover:text-gray-700">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
            </div>
            <div class="p-6">
                <div class="flex border-b mb-6">
                    <button class="tab-button active px-6 py-2 border-b-2 border-purple-500 text-purple-600" data-tab="profile">
                        Profile
                    </button>
                    <button class="tab-button px-6 py-2 text-gray-600" data-tab="addresses">
                        Addresses
                    </button>
                    <button class="tab-button px-6 py-2 text-gray-600" data-tab="orders">
                        Orders
                    </button>
                </div>

                <!-- Profile Tab -->
                <div id="profileTab" class="tab-content">
                    <form id="profileForm" class="space-y-4">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Full Name</label>
                                <input type="text" id="profileName" required
                                       class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                                <input type="email" id="profileEmail" required
                                       class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                            </div>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Phone</label>
                                <input type="tel" id="profilePhone"
                                       class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Date of Birth</label>
                                <input type="date" id="profileBirthdate"
                                       class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                            </div>
                        </div>
                        <button type="submit" class="bg-purple-600 text-white px-6 py-3 rounded-lg hover:bg-purple-700 transition-colors">
                            Update Profile
                        </button>
                    </form>
                </div>

                <!-- Addresses Tab -->
                <div id="addressesTab" class="tab-content hidden">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-lg font-semibold">Shipping Addresses</h3>
                        <button id="addAddressBtn" class="bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors">
                            Add New Address
                        </button>
                    </div>
                    <div id="addressesList" class="space-y-4">
                        <!-- Addresses will be inserted here -->
                    </div>
                </div>

                <!-- Orders Tab -->
                <div id="ordersTab" class="tab-content hidden">
                    <h3 class="text-lg font-semibold mb-6">Order History</h3>
                    <div id="ordersList" class="space-y-4">
                        <!-- Orders will be inserted here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Address Modal -->
    <div id="addressModal" class="modal">
        <div class="bg-white rounded-lg max-w-md mx-4 w-full">
            <div class="p-6 border-b">
                <div class="flex justify-between items-center">
                    <h2 id="addressModalTitle" class="text-2xl font-bold">Add Address</h2>
                    <button id="closeAddressModal" class="text-gray-500 hover:text-gray-700">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
            </div>
            <div class="p-6">
                <form id="addressForm" class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Label</label>
                        <input type="text" id="addressLabel" placeholder="Home, Work, etc." required
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Full Name</label>
                        <input type="text" id="addressName" required
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Street Address</label>
                        <input type="text" id="addressStreet" required
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">City</label>
                            <input type="text" id="addressCity" required
                                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">State</label>
                            <input type="text" id="addressState" required
                                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                        </div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">ZIP Code</label>
                            <input type="text" id="addressZip" required
                                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Country</label>
                            <input type="text" id="addressCountry" required
                                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Phone</label>
                        <input type="tel" id="addressPhone"
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                    </div>
                    <div class="flex items-center">
                        <input type="checkbox" id="addressDefault" class="mr-2">
                        <label for="addressDefault" class="text-sm text-gray-700">Set as default address</label>
                    </div>
                    <button type="submit" class="w-full bg-purple-600 text-white py-3 rounded-lg hover:bg-purple-700 transition-colors">
                        Save Address
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- Checkout Modal -->
    <div id="checkoutModal" class="modal">
        <div class="bg-white rounded-lg max-w-4xl mx-4 w-full max-h-[90vh] overflow-y-auto">
            <div class="p-6 border-b">
                <div class="flex justify-between items-center">
                    <h2 class="text-2xl font-bold">Checkout</h2>
                    <button id="closeCheckoutModal" class="text-gray-500 hover:text-gray-700">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
            </div>
            <div class="p-6">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <!-- Guest/Login Section -->
                    <div>
                        <div id="guestCheckoutSection" class="mb-6">
                            <h3 class="text-lg font-semibold mb-4">Checkout Options</h3>
                            <div class="space-y-3">
                                <button id="loginCheckoutBtn" class="w-full bg-purple-600 text-white py-3 rounded-lg hover:bg-purple-700 transition-colors">
                                    Login to Your Account
                                </button>
                                <button id="guestCheckoutBtn" class="w-full bg-gray-600 text-white py-3 rounded-lg hover:bg-gray-700 transition-colors">
                                    Continue as Guest
                                </button>
                            </div>
                        </div>

                        <!-- Shipping Form -->
                        <div id="shippingForm" class="hidden">
                            <h3 class="text-lg font-semibold mb-4">Shipping Information</h3>
                            <form id="checkoutForm" class="space-y-4">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">First Name</label>
                                        <input type="text" id="checkoutFirstName" required
                                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Last Name</label>
                                        <input type="text" id="checkoutLastName" required
                                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                                    </div>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                                    <input type="email" id="checkoutEmail" required
                                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Phone</label>
                                    <input type="tel" id="checkoutPhone" required
                                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Street Address</label>
                                    <input type="text" id="checkoutStreet" required
                                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">City</label>
                                        <input type="text" id="checkoutCity" required
                                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">State</label>
                                        <input type="text" id="checkoutState" required
                                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                                    </div>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">ZIP Code</label>
                                        <input type="text" id="checkoutZip" required
                                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Country</label>
                                        <input type="text" id="checkoutCountry" required
                                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                                    </div>
                                </div>
                                <div id="createAccountSection" class="hidden">
                                    <div class="flex items-center mb-4">
                                        <input type="checkbox" id="createAccount" class="mr-2">
                                        <label for="createAccount" class="text-sm text-gray-700">Create an account for faster checkout next time</label>
                                    </div>
                                    <div id="passwordSection" class="hidden">
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Password</label>
                                        <input type="password" id="checkoutPassword"
                                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                                    </div>
                                </div>
                            </form>
                        </div>

                        <!-- Saved Addresses for Logged-in Users -->
                        <div id="savedAddressesSection" class="hidden">
                            <h3 class="text-lg font-semibold mb-4">Select Shipping Address</h3>
                            <div id="savedAddressesList" class="space-y-3">
                                <!-- Saved addresses will be inserted here -->
                            </div>
                            <button id="useNewAddressBtn" class="mt-4 text-purple-600 hover:text-purple-700">
                                Use a different address
                            </button>
                        </div>
                    </div>

                    <!-- Order Summary -->
                    <div>
                        <h3 class="text-lg font-semibold mb-4">Order Summary</h3>
                        <div id="checkoutItems" class="space-y-4 mb-6">
                            <!-- Checkout items will be inserted here -->
                        </div>
                        <div class="border-t pt-4 space-y-2">
                            <div class="flex justify-between">
                                <span>Subtotal:</span>
                                <span id="checkoutSubtotal">$0.00</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Shipping:</span>
                                <span id="checkoutShipping">$9.99</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Tax:</span>
                                <span id="checkoutTax">$0.00</span>
                            </div>
                            <div class="border-t pt-2 flex justify-between font-bold text-lg">
                                <span>Total:</span>
                                <span id="checkoutTotal">$0.00</span>
                            </div>
                        </div>
                        <button id="placeOrderBtn" class="w-full bg-purple-600 text-white py-3 rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                            Place Order
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Product data - will be loaded from JSON
        let products = [];

        // Global variables
        let cart = [];
        let currentUser = null;
        let isLoginMode = true;
        let selectedProduct = null;
        let editingAddressIndex = -1;
        let currentTab = 'profile';

        // Initialize the website
        document.addEventListener('DOMContentLoaded', function() {
            loadUserData();
            loadProducts();
            updateCartCount();
            updateAuthButton();
            setupEventListeners();
            
            // Initialize language selector
            const savedLanguage = localStorage.getItem('selectedLanguage') || 'en';
            document.getElementById('languageSelector').value = savedLanguage;
            switchLanguage(savedLanguage);
            
            // Language selector event listener
            document.getElementById('languageSelector').addEventListener('change', function() {
                switchLanguage(this.value);
            });
        });
        const translations = {
            en: {
                "Our Collection": "Our Collection",
                "About Daichi Clothing": "About Daichi Clothing", 
                "Get In Touch": "Get In Touch",
                "All Products": "All Products",
                "Dresses": "Dresses",
                "Capes": "Capes", 
                "Suits": "Suits",
                "Bestsellers": "Bestsellers",
                "Explore Collection": "Explore Collection",
                "Send Message": "Send Message",
                "Your Name": "Your Name",
                "Your Email": "Your Email", 
                "Your Message": "Your Message",
                "Add to Cart": "Add to Cart",
                "Pre-order Only": "Pre-order Only"
            },
            ru: {
                "Our Collection": "ÐÐ°ÑˆÐ° ÐºÐ¾Ð»Ð»ÐµÐºÑ†Ð¸Ñ",
                "About Daichi Clothing": "Ðž Daichi Clothing",
                "Get In Touch": "Ð¡Ð²ÑÐ·Ð°Ñ‚ÑŒÑÑ Ñ Ð½Ð°Ð¼Ð¸", 
                "All Products": "Ð’ÑÐµ Ñ‚Ð¾Ð²Ð°Ñ€Ñ‹",
                "Dresses": "ÐŸÐ»Ð°Ñ‚ÑŒÑ",
                "Capes": "ÐÐ°ÐºÐ¸Ð´ÐºÐ¸",
                "Suits": "ÐšÐ¾ÑÑ‚ÑŽÐ¼Ñ‹", 
                "Bestsellers": "Ð¥Ð¸Ñ‚Ñ‹ Ð¿Ñ€Ð¾Ð´Ð°Ð¶",
                "Explore Collection": "Ð˜Ð·ÑƒÑ‡Ð¸Ñ‚ÑŒ ÐºÐ¾Ð»Ð»ÐµÐºÑ†Ð¸ÑŽ",
                "Send Message": "ÐžÑ‚Ð¿Ñ€Ð°Ð²Ð¸Ñ‚ÑŒ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ",
                "Your Name": "Ð’Ð°ÑˆÐµ Ð¸Ð¼Ñ",
                "Your Email": "Ð’Ð°Ñˆ email",
                "Your Message": "Ð’Ð°ÑˆÐµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ", 
                "Add to Cart": "Ð’ ÐºÐ¾Ñ€Ð·Ð¸Ð½Ñƒ",
                "Pre-order Only": "Ð¢Ð¾Ð»ÑŒÐºÐ¾ Ð¿Ñ€ÐµÐ´Ð·Ð°ÐºÐ°Ð·"
            },
            kz: {
                "Our Collection": "Ð‘Ñ–Ð·Ð´Ñ–Ò£ Ð¶Ð¸Ð½Ð°Ò›",
                "About Daichi Clothing": "Daichi Clothing Ñ‚ÑƒÑ€Ð°Ð»Ñ‹",
                "Get In Touch": "Ð‘Ñ–Ð· Ð±ÐµÐ½ Ð±Ð°Ð¹Ð»Ð°Ð½Ñ‹ÑÑ‹Ò£Ñ‹Ð·",
                "All Products": "Ð‘Ð°Ñ€Ð»Ñ‹Ò› Ó©Ð½Ñ–Ð¼Ð´ÐµÑ€", 
                "Dresses": "ÐšÓ©Ð¹Ð»ÐµÐºÑ‚ÐµÑ€",
                "Capes": "Ð–ÐµÐ¹Ð´ÐµÐ»ÐµÑ€",
                "Suits": "ÐšÐ¾ÑÑ‚ÑŽÐ¼Ð´ÐµÑ€",
                "Bestsellers": "Ð•Ò£ ÐºÓ©Ð¿ ÑÐ°Ñ‚Ñ‹Ð»Ð°Ñ‚Ñ‹Ð½Ð´Ð°Ñ€",
                "Explore Collection": "Ð–Ð¸Ð½Ð°Ò›Ñ‚Ñ‹ Ð·ÐµÑ€Ñ‚Ñ‚ÐµÑƒ", 
                "Send Message": "Ð¥Ð°Ð±Ð°Ñ€ Ð¶Ñ–Ð±ÐµÑ€Ñƒ",
                "Your Name": "Ð¡Ñ–Ð·Ð´Ñ–Ò£ Ð°Ñ‚Ñ‹Ò£Ñ‹Ð·", 
                "Your Email": "Ð¡Ñ–Ð·Ð´Ñ–Ò£ email",
                "Your Message": "Ð¡Ñ–Ð·Ð´Ñ–Ò£ Ñ…Ð°Ð±Ð°Ñ€Ñ‹Ò£Ñ‹Ð·",
                "Add to Cart": "Ð¡ÐµÐ±ÐµÑ‚ÐºÐµ Ò›Ð¾ÑÑƒ",
                "Pre-order Only": "Ð¢ÐµÐº Ð°Ð»Ð´Ñ‹Ð½ Ð°Ð»Ð° Ñ‚Ð°Ð¿ÑÑ‹Ñ€Ñ‹Ñ"
            }
        };

        function switchLanguage(lang) {
            // Update elements with data attributes
            document.querySelectorAll('[data-en]').forEach(element => {
                if (element.hasAttribute(`data-${lang}`)) {
                    element.textContent = element.getAttribute(`data-${lang}`);
                }
            });
            
            // Update placeholders
            document.querySelectorAll('[data-placeholder-en]').forEach(element => {
                if (element.hasAttribute(`data-placeholder-${lang}`)) {
                    element.placeholder = element.getAttribute(`data-placeholder-${lang}`);
                }
            });
            
            // Store language preference
            localStorage.setItem('selectedLanguage', lang);
            
            // Re-render products with new language
            displayFeaturedProducts();
            displayProducts();
        }
        async function loadProducts() {
            try {
                // For demo purposes, we'll use the product data directly
                // In a real app, you would fetch from: await fetch('data/products.json')
                products = [
                    {
                        "id": 1,
                        "name": "Elegant Zhakkard Dress",
                        "price": 89.99,
                        "category": "Dresses",
                        "image": "https://images.unsplash.com/photo-1542273917363-3b1817f69a2d?w=400&h=400&fit=crop",
                        "description": "An elegant zhakkard dress perfect for special occasions with intricate patterns and premium fabric.",
                        "sizes": ["XS", "S", "M", "L"],
                        "colors": ["Navy", "Black", "Burgundy"],
                        "featured": true,
                        "stock": 12
                    },
                    {
                        "id": 2,
                        "name": "Classic Cape",
                        "price": 129.99,
                        "category": "Capes",
                        "image": "https://images.unsplash.com/photo-1544966503-7cc5ac882d5e?w=400&h=400&fit=crop",
                        "description": "A timeless classic cape that adds sophistication to any outfit.",
                        "sizes": ["S", "M", "L", "XL"],
                        "colors": ["Black", "Navy", "Gray"],
                        "featured": true,
                        "stock": 8
                    },
                    {
                        "id": 3,
                        "name": "Tailored Suit",
                        "price": 199.99,
                        "category": "Suits",
                        "image": "https://images.unsplash.com/photo-1595341888016-a3921422f9d9?w=400&h=400&fit=crop",
                        "description": "Professionally tailored suit for business and formal occasions.",
                        "sizes": ["XS", "S", "M", "L"],
                        "colors": ["Black", "Navy", "Charcoal"],
                        "featured": false,
                        "stock": 15
                    },
                    {
                        "id": 4,
                        "name": "Red Satin Dress",
                        "price": 110.99,
                        "category": "Bestsellers",
                        "image": "https://images.unsplash.com/photo-1583743814966-8936f5b7be1a?w=400&h=400&fit=crop",
                        "description": "Stunning red satin dress that makes a bold statement.",
                        "sizes": ["XS", "S", "M", "L"],
                        "colors": ["Red", "Black", "Navy"],
                        "featured": true,
                        "stock": 10
                    },
                    {
                        "id": 5,
                        "name": "Vintage White Dress",
                        "price": 89.99,
                        "category": "Bestsellers",
                        "image": "https://images.unsplash.com/photo-1553062407-98eeb64c6a62?w=400&h=400&fit=crop",
                        "description": "Classic vintage white dress with timeless appeal.",
                        "sizes": ["S", "M", "L", "XL"],
                        "colors": ["White", "Ivory", "Cream"],
                        "featured": true,
                        "stock": 14
                    },
                    {
                        "id": 6,
                        "name": "Pink Princess Dress",
                        "price": 100.99,
                        "category": "Dresses",
                        "image": "https://images.unsplash.com/photo-1520367745676-56196632073f?w=400&h=400&fit=crop",
                        "description": "Beautiful pink princess dress perfect for special occasions.",
                        "sizes": ["XS", "S", "M", "L"],
                        "colors": ["Pink", "Rose", "Blush"],
                        "featured": false,
                        "stock": 9
                    },
                    {
                        "id": 7,
                        "name": "Wool Cape",
                        "price": 139.99,
                        "category": "Capes",
                        "image": "https://images.unsplash.com/photo-1529374255404-311a2a4f1fd9?w=400&h=400&fit=crop",
                        "description": "Warm and stylish wool cape for autumn and winter.",
                        "sizes": ["S", "M", "L", "XL"],
                        "colors": ["Gray", "Camel", "Black"],
                        "featured": false,
                        "stock": 7
                    },
                    {
                        "id": 8,
                        "name": "Black Classic Cape",
                        "price": 219.99,
                        "category": "Capes",
                        "image": "https://images.unsplash.com/photo-1593030103066-0093718efeb9?w=400&h=400&fit=crop",
                        "description": "Premium black classic cape for the ultimate in elegance.",
                        "sizes": ["S", "M", "L", "XL"],
                        "colors": ["Black", "Charcoal"],
                        "featured": true,
                        "stock": 5
                    },
                    {
                        "id": 9,
                        "name": "Black Vintage Dress",
                        "price": 89.99,
                        "category": "Bestsellers",
                        "image": "https://images.unsplash.com/photo-1541099649105-f69ad21f3246?w=400&h=400&fit=crop",
                        "description": "Sophisticated black vintage dress with classic styling.",
                        "sizes": ["XS", "S", "M", "L"],
                        "colors": ["Black", "Navy", "Charcoal"],
                        "featured": true,
                        "stock": 11
                    },
                    {
                        "id": 10,
                        "name": "Pink Mini Dress",
                        "price": 79.99,
                        "category": "Dresses",
                        "image": "https://images.unsplash.com/photo-1591047139829-d91aecb6caea?w=400&h=400&fit=crop",
                        "description": "Playful pink mini dress perfect for casual outings.",
                        "sizes": ["XS", "S", "M", "L"],
                        "colors": ["Pink", "Coral", "Rose"],
                        "featured": false,
                        "stock": 16
                    },
                    {
                        "id": 11,
                        "name": "Summer Dress",
                        "price": 69.99,
                        "category": "Dresses",
                        "image": "https://images.unsplash.com/photo-1525507119028-ed4c629a60a3?w=400&h=400&fit=crop",
                        "description": "Light and breezy summer dress for warm weather.",
                        "sizes": ["XS", "S", "M", "L"],
                        "colors": ["Yellow", "White", "Blue"],
                        "featured": false,
                        "stock": 20
                    },
                    {
                        "id": 12,
                        "name": "Vintage Style Cape",
                        "price": 149.99,
                        "category": "Capes",
                        "image": "https://images.unsplash.com/photo-1529374255404-311a2a4f1fd9?w=400&h=400&fit=crop",
                        "description": "Vintage-inspired cape with modern comfort and style.",
                        "sizes": ["S", "M", "L", "XL"],
                        "colors": ["Brown", "Tan", "Black"],
                        "featured": false,
                        "stock": 6
                    },
                    {
                        "id": 13,
                        "name": "HandMade Suit",
                        "price": 179.99,
                        "category": "Suits",
                        "image": "https://images.unsplash.com/photo-1595341888016-a3921422f9d9?w=400&h=400&fit=crop",
                        "description": "Exquisitely handmade suit with attention to every detail.",
                        "sizes": ["XS", "S", "M", "L", "XL", "XXL"],
                        "colors": ["Navy", "Charcoal", "Black"],
                        "featured": true,
                        "stock": 8
                    },
                    {
                        "id": 14,
                        "name": "Purple Mini Dress",
                        "price": 69.99,
                        "category": "Bestsellers",
                        "image": "https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?w=400&h=400&fit=crop",
                        "description": "Vibrant purple mini dress that stands out in any crowd.",
                        "sizes": ["XS", "S", "M", "L"],
                        "colors": ["Purple", "Violet", "Plum"],
                        "featured": false,
                        "stock": 13
                    },
                    {
                        "id": 15,
                        "name": "Black Maxi Dress",
                        "price": 99.99,
                        "category": "Dresses",
                        "image": "https://images.unsplash.com/photo-1529958030586-3aae4ca485ff?w=400&h=400&fit=crop",
                        "description": "Elegant black maxi dress for formal and semi-formal events.",
                        "sizes": ["XS", "S", "M", "L", "XL"],
                        "colors": ["Black", "Navy", "Charcoal"],
                        "featured": false,
                        "stock": 12
                    },
                    {
                        "id": 16,
                        "name": "Evening Gown",
                        "price": 289.99,
                        "category": "Dresses",
                        "image": "https://images.unsplash.com/photo-1539109136881-3be0616acf4b?w=400&h=400&fit=crop",
                        "description": "Luxurious evening gown for the most special occasions.",
                        "sizes": ["XS", "S", "M", "L", "XL"],
                        "colors": ["Black", "Navy", "Burgundy", "Emerald"],
                        "featured": true,
                        "stock": 4
                    },
                    {
                        "id": 17,
                        "name": "Winter Cape",
                        "price": 159.99,
                        "category": "Capes",
                        "image": "https://images.unsplash.com/photo-1529374255404-311a2a4f1fd9?w=400&h=400&fit=crop",
                        "description": "Cozy winter cape to keep you warm and stylish.",
                        "sizes": ["S", "M", "L", "XL"],
                        "colors": ["Black", "Gray", "Navy"],
                        "featured": false,
                        "stock": 9
                    },
                    {
                        "id": 18,
                        "name": "Grey Wool Cape",
                        "price": 229.99,
                        "category": "Capes",
                        "image": "https://images.unsplash.com/photo-1593030103066-0093718efeb9?w=400&h=400&fit=crop",
                        "description": "Premium grey wool cape with superior craftsmanship.",
                        "sizes": ["S", "M", "L", "XL"],
                        "colors": ["Gray", "Charcoal", "Silver"],
                        "featured": false,
                        "stock": 3
                    },
                    {
                        "id": 19,
                        "name": "Red Corset Dress",
                        "price": 99.99,
                        "category": "Bestsellers",
                        "image": "https://images.unsplash.com/photo-1551028719-00167b16eac5?w=400&h=400&fit=crop",
                        "description": "Bold red corset dress that accentuates your silhouette.",
                        "sizes": ["XS", "S", "M", "L", "XL"],
                        "colors": ["Red", "Black", "Burgundy"],
                        "featured": true,
                        "stock": 7
                    },
                    {
                        "id": 20,
                        "name": "Viola Vintage Dress",
                        "price": 189.99,
                        "category": "Dresses",
                        "image": "https://images.unsplash.com/photo-1591047139829-d91aecb6c8ea?w=400&h=400&fit=crop",
                        "description": "Exquisite viola vintage dress with intricate detailing.",
                        "sizes": ["XS", "S", "M", "L"],
                        "colors": ["Purple", "Navy", "Black"],
                        "featured": false,
                        "stock": 6
                    }
                ];
                
                displayFeaturedProducts();
                displayProducts();
                createCategoryFilters();
            } catch (error) {
                console.error('Error loading products:', error);
                showNotification('Error loading products', 'error');
            }
        }

        // Create category filters dynamically
        function createCategoryFilters() {
            const categories = [...new Set(products.map(product => product.category))];
            const filterContainer = document.querySelector('.mb-8.flex.flex-wrap.justify-center.gap-4');
            
            if (filterContainer) {
                filterContainer.innerHTML = `
                    <button class="filter-btn active px-6 py-2 rounded-full bg-purple-600 text-white hover:bg-purple-700 transition-colors" data-category="all">
                        All Products
                    </button>
                    ${categories.map(category => `
                        <button class="filter-btn px-6 py-2 rounded-full bg-white text-gray-700 hover:bg-purple-600 hover:text-white transition-colors" data-category="${category.toLowerCase()}">
                            ${category}
                        </button>
                    `).join('')}
                `;

                // Re-attach event listeners for new filter buttons
                document.querySelectorAll('.filter-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        document.querySelectorAll('.filter-btn').forEach(b => {
                            b.classList.remove('active', 'bg-purple-600', 'text-white');
                            b.classList.add('bg-white', 'text-gray-700');
                        });
                        this.classList.add('active', 'bg-red-900', 'text-white');
                        this.classList.remove('bg-white', 'text-gray-700');
                        
                        const category = this.dataset.category;
                        filterProductsByCategory(category);
                    });
                });
            }
        }

        // Load user data from storage
        function loadUserData() {
            const storedCart = JSON.parse(localStorage.getItem('cart')) || [];
            const storedUser = JSON.parse(localStorage.getItem('currentUser')) || null;
            
            cart = storedCart;
            currentUser = storedUser;
        }

        // Event Listeners
        function setupEventListeners() {
            // Mobile menu toggle
            document.getElementById('mobileMenuBtn').addEventListener('click', function() {
                const mobileMenu = document.getElementById('mobileMenu');
                mobileMenu.classList.toggle('hidden');
            });

            // Search functionality
            document.getElementById('searchInput').addEventListener('input', function(e) {
                const searchTerm = e.target.value.toLowerCase();
                filterProducts(searchTerm);
            });

            // Category filters
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.filter-btn').forEach(b => {
                        b.classList.remove('active', 'bg-red-900', 'text-white');
                        b.classList.add('bg-white', 'text-gray-700');
                    });
                    this.classList.add('active', 'bg-purple-600', 'text-white');
                    this.classList.remove('bg-white', 'text-gray-700');
                    
                    const category = this.dataset.category;
                    filterProductsByCategory(category);
                });
            });

            // Cart modal
            document.getElementById('cartBtn').addEventListener('click', openCartModal);
            document.getElementById('closeCartModal').addEventListener('click', closeCartModal);

            // Product modal
            document.getElementById('closeProductModal').addEventListener('click', closeProductModal);
            document.getElementById('addToCartBtn').addEventListener('click', addToCartFromModal);

            // Auth modal
            document.getElementById('authBtn').addEventListener('click', handleAuthButtonClick);
            document.getElementById('closeAuthModal').addEventListener('click', closeAuthModal);
            document.getElementById('authToggle').addEventListener('click', toggleAuthMode);
            document.getElementById('authForm').addEventListener('submit', handleAuth);
            document.getElementById('forgotPassword').addEventListener('click', openPasswordResetModal);

            // Password reset modal
            document.getElementById('closePasswordResetModal').addEventListener('click', closePasswordResetModal);
            document.getElementById('passwordResetForm').addEventListener('submit', handlePasswordReset);

            // Profile modal
            document.getElementById('closeProfileModal').addEventListener('click', closeProfileModal);
            document.getElementById('profileForm').addEventListener('submit', updateProfile);

            // Tab switching
            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.addEventListener('click', function() {
                    switchTab(this.dataset.tab);
                });
            });

            // Address modal
            document.getElementById('addAddressBtn').addEventListener('click', openAddressModal);
            document.getElementById('closeAddressModal').addEventListener('click', closeAddressModal);
            document.getElementById('addressForm').addEventListener('submit', saveAddress);

            // Checkout modal
            document.getElementById('checkoutBtn').addEventListener('click', openCheckoutModal);
            document.getElementById('closeCheckoutModal').addEventListener('click', closeCheckoutModal);
            document.getElementById('loginCheckoutBtn').addEventListener('click', () => {
                closeCheckoutModal();
                openAuthModal();
            });
            document.getElementById('guestCheckoutBtn').addEventListener('click', showGuestCheckoutForm);
            document.getElementById('useNewAddressBtn').addEventListener('click', showNewAddressForm);
            document.getElementById('createAccount').addEventListener('change', togglePasswordSection);
            document.getElementById('placeOrderBtn').addEventListener('click', placeOrder);

            // User dropdown
            document.addEventListener('click', function(e) {
                if (!e.target.closest('#authBtn') && !e.target.closest('#userDropdown')) {
                    document.getElementById('userDropdown').classList.add('hidden');
                }
            });

            // Close modals when clicking outside
            window.addEventListener('click', function(e) {
                if (e.target.classList.contains('modal')) {
                    e.target.classList.remove('active');
                }
            });
        }

        // Product Display Functions
        function displayFeaturedProducts() {
            const featuredProducts = products.filter(p => p.featured);
            const container = document.getElementById('featuredProducts');
            
            container.innerHTML = featuredProducts.map(product => `
                <div class="bg-white rounded-lg shadow-md overflow-hidden card-hover cursor-pointer" onclick="openProductModal(${product.id})">
                    <div class="h-64 bg-cover bg-center" style="background-image: url('${product.image}')"></div>
                    <div class="p-6">
                        <h3 class="text-xl font-semibold mb-2">${product.name}</h3>
                        <p class="text-gray-600 mb-4">${product.description.substring(0, 80)}...</p>
                        <div class="flex justify-between items-center">
                            <span class="text-2xl font-bold text-purple-600">${product.price}</span>
                            <button onclick="event.stopPropagation(); quickAddToCart(${product.id})" class="bg-red-900 text-white px-4 py-2 rounded hover:bg-red-800 transition-colors" data-en="Add to Cart" data-ru="Ð’ ÐºÐ¾Ñ€Ð·Ð¸Ð½Ñƒ" data-kz="Ð¡ÐµÐ±ÐµÑ‚ÐºÐµ Ò›Ð¾ÑÑƒ">
                                Add to Cart
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function displayProducts(productsToShow = products) {
            const container = document.getElementById('productGrid');
            
            container.innerHTML = productsToShow.map(product => `
                <div class="bg-white rounded-lg shadow-md overflow-hidden card-hover cursor-pointer animate-fadeIn" onclick="openProductModal(${product.id})">
                    <div class="h-64 bg-cover bg-center" style="background-image: url('${product.image}')"></div>
                    <div class="p-6">
                        <h3 class="text-xl font-semibold mb-2">${product.name}</h3>
                        <p class="text-gray-600 mb-4">${product.description.substring(0, 60)}...</p>
                        <div class="flex justify-between items-center">
                            <span class="text-2xl font-bold text-purple-600">${product.price}</span>
                            <span class="text-sm text-gray-500">${product.stock} in stock</span>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // Filter Functions
        function filterProducts(searchTerm) {
            const filtered = products.filter(product => 
                product.name.toLowerCase().includes(searchTerm) ||
                product.description.toLowerCase().includes(searchTerm) ||
                product.category.toLowerCase().includes(searchTerm)
            );
            displayProducts(filtered);
        }

        function filterProductsByCategory(category) {
            if (category === 'all') {
                displayProducts();
            } else {
                const filtered = products.filter(product => product.category.toLowerCase() === category);
                displayProducts(filtered);
            }
        }

        // Authentication Functions
        function handleAuthButtonClick() {
            if (currentUser) {
                toggleUserDropdown();
            } else {
                openAuthModal();
            }
        }

        function toggleUserDropdown() {
            const dropdown = document.getElementById('userDropdown');
            const content = document.getElementById('userDropdownContent');
            
            if (dropdown.classList.contains('hidden')) {
                content.innerHTML = `
                    <div class="px-4 py-2 text-sm text-gray-700 border-b">
                        <div class="font-medium">${currentUser.name}</div>
                        <div class="text-gray-500">${currentUser.email}</div>
                    </div>
                    <button onclick="openProfileModal()" class="w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                        <i class="fas fa-user mr-2"></i>My Account
                    </button>
                    <button onclick="openOrderHistory()" class="w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                        <i class="fas fa-box mr-2"></i>Order History
                    </button>
                    <button onclick="logout()" class="w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                        <i class="fas fa-sign-out-alt mr-2"></i>Logout
                    </button>
                `;
                dropdown.classList.remove('hidden');
            } else {
                dropdown.classList.add('hidden');
            }
        }

        function openAuthModal() {
            document.getElementById('authModal').classList.add('active');
        }

        function closeAuthModal() {
            document.getElementById('authModal').classList.remove('active');
            resetAuthForm();
        }

        function resetAuthForm() {
            document.getElementById('authForm').reset();
            isLoginMode = true;
            updateAuthModalUI();
        }

        function toggleAuthMode() {
            isLoginMode = !isLoginMode;
            updateAuthModalUI();
        }

        function updateAuthModalUI() {
            const title = document.getElementById('authModalTitle');
            const submitBtn = document.getElementById('authSubmitBtn');
            const toggle = document.getElementById('authToggle');
            const nameField = document.getElementById('authNameField');

            if (isLoginMode) {
                title.textContent = 'Login';
                submitBtn.textContent = 'Login';
                toggle.textContent = "Don't have an account? Sign up";
                nameField.classList.add('hidden');
                document.getElementById('authName').removeAttribute('required');
            } else {
                title.textContent = 'Sign Up';
                submitBtn.textContent = 'Sign Up';
                toggle.textContent = 'Already have an account? Login';
                nameField.classList.remove('hidden');
                document.getElementById('authName').setAttribute('required', 'required');
            }
        }

        function handleAuth(e) {
            e.preventDefault();
            
            const email = document.getElementById('authEmail').value;
            const password = document.getElementById('authPassword').value;
            const name = document.getElementById('authName').value;

            if (isLoginMode) {
                login(email, password);
            } else {
                register(email, password, name);
            }
        }

        function login(email, password) {
            const users = JSON.parse(localStorage.getItem('users')) || [];
            const user = users.find(u => u.email === email && u.password === password);
            
            if (user) {
                currentUser = user;
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
                updateAuthButton();
                closeAuthModal();
                showNotification('Welcome back!');
                // Merge guest cart with user cart if exists
                mergeGuestCart();
            } else {
                showNotification('Invalid email or password', 'error');
            }
        }

        function register(email, password, name) {
            if (!name.trim()) {
                showNotification('Please enter your full name', 'error');
                return;
            }

            if (password.length < 6) {
                showNotification('Password must be at least 6 characters', 'error');
                return;
            }

            const users = JSON.parse(localStorage.getItem('users')) || [];
            
            if (users.find(u => u.email === email)) {
                showNotification('Email already exists', 'error');
                return;
            }

            const newUser = {
                id: Date.now().toString(),
                email,
                password,
                name,
                phone: '',
                birthdate: '',
                addresses: [],
                orders: [],
                createdAt: new Date().toISOString()
            };

            users.push(newUser);
            localStorage.setItem('users', JSON.stringify(users));
            
            currentUser = newUser;
            localStorage.setItem('currentUser', JSON.stringify(currentUser));
            
            updateAuthButton();
            closeAuthModal();
            showNotification('Account created successfully!');
            mergeGuestCart();
        }

        function mergeGuestCart() {
            if (cart.length > 0) {
                // In a real app, you might want to merge with existing user cart
                localStorage.setItem('cart', JSON.stringify(cart));
                updateCartCount();
            }
        }

        function logout() {
            currentUser = null;
            localStorage.removeItem('currentUser');
            cart = [];
            localStorage.removeItem('cart');
            updateAuthButton();
            updateCartCount();
            document.getElementById('userDropdown').classList.add('hidden');
            showNotification('Logged out successfully');
        }

        function updateAuthButton() {
            const authBtn = document.getElementById('authBtn');
            if (currentUser) {
                authBtn.innerHTML = '<i class="fas fa-user-circle text-xl text-red-900"></i>';
                authBtn.title = `Welcome, ${currentUser.name}`;
            } else {
                authBtn.innerHTML = '<i class="fas fa-user text-xl"></i>';
                authBtn.title = 'Login / Register';
            }
        }

        // Password Reset Functions
        function openPasswordResetModal() {
            closeAuthModal();
            document.getElementById('passwordResetModal').classList.add('active');
        }

        function closePasswordResetModal() {
            document.getElementById('passwordResetModal').classList.remove('active');
            document.getElementById('passwordResetForm').reset();
        }

        function handlePasswordReset(e) {
            e.preventDefault();
            const email = document.getElementById('resetEmail').value;
            
            // In a real app, this would send an actual email
            const users = JSON.parse(localStorage.getItem('users')) || [];
            const user = users.find(u => u.email === email);
            
            if (user) {
                showNotification('Password reset link sent to your email');
                closePasswordResetModal();
            } else {
                showNotification('Email not found', 'error');
            }
        }

        // Profile Management Functions
        function openProfileModal() {
            if (!currentUser) {
                openAuthModal();
                return;
            }
            
            document.getElementById('userDropdown').classList.add('hidden');
            populateProfileForm();
            switchTab('profile');
            document.getElementById('profileModal').classList.add('active');
        }

        function closeProfileModal() {
            document.getElementById('profileModal').classList.remove('active');
        }

        function populateProfileForm() {
            if (currentUser) {
                document.getElementById('profileName').value = currentUser.name || '';
                document.getElementById('profileEmail').value = currentUser.email || '';
                document.getElementById('profilePhone').value = currentUser.phone || '';
                document.getElementById('profileBirthdate').value = currentUser.birthdate || '';
            }
        }

        function switchTab(tabName) {
            // Update tab buttons
            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('active', 'border-purple-500', 'text-purple-600');
                btn.classList.add('text-gray-600');
            });
            
            document.querySelector(`[data-tab="${tabName}"]`).classList.add('active', 'border-purple-500', 'text-purple-600');
            document.querySelector(`[data-tab="${tabName}"]`).classList.remove('text-gray-600');

            // Show/hide tab contents
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.add('hidden');
            });
            
            document.getElementById(`${tabName}Tab`).classList.remove('hidden');
            currentTab = tabName;

            // Load tab-specific content
            if (tabName === 'addresses') {
                displayAddresses();
            } else if (tabName === 'orders') {
                displayOrders();
            }
        }

        function updateProfile(e) {
            e.preventDefault();
            
            const updatedUser = {
                ...currentUser,
                name: document.getElementById('profileName').value,
                email: document.getElementById('profileEmail').value,
                phone: document.getElementById('profilePhone').value,
                birthdate: document.getElementById('profileBirthdate').value
            };

            // Update in storage
            const users = JSON.parse(localStorage.getItem('users')) || [];
            const userIndex = users.findIndex(u => u.id === currentUser.id);
            
            if (userIndex !== -1) {
                users[userIndex] = updatedUser;
                localStorage.setItem('users', JSON.stringify(users));
                currentUser = updatedUser;
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
                updateAuthButton();
                showNotification('Profile updated successfully');
            }
        }

        // Address Management Functions
        function displayAddresses() {
            const container = document.getElementById('addressesList');
            
            if (!currentUser.addresses || currentUser.addresses.length === 0) {
                container.innerHTML = `
                    <div class="text-center py-8 text-gray-500">
                        <i class="fas fa-map-marker-alt text-4xl mb-4"></i>
                        <p>No addresses saved yet</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = currentUser.addresses.map((address, index) => `
                <div class="border rounded-lg p-4 ${address.isDefault ? 'border-purple-500 bg-purple-50' : 'border-gray-200'}">
                    <div class="flex justify-between items-start">
                        <div class="flex-1">
                            <div class="flex items-center gap-2 mb-2">
                                <h4 class="font-semibold">${address.label}</h4>
                                ${address.isDefault ? '<span class="text-xs bg-purple-600 text-white px-2 py-1 rounded">Default</span>' : ''}
                            </div>
                            <p class="text-gray-600">
                                ${address.name}<br>
                                ${address.street}<br>
                                ${address.city}, ${address.state} ${address.zip}<br>
                                ${address.country}
                                ${address.phone ? `<br>Phone: ${address.phone}` : ''}
                            </p>
                        </div>
                        <div class="flex gap-2">
                            <button onclick="editAddress(${index})" class="text-blue-600 hover:text-blue-700">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button onclick="deleteAddress(${index})" class="text-red-600 hover:text-red-700">
                                <i class="fas fa-trash"></i>
                            </button>
                            ${!address.isDefault ? `<button onclick="setDefaultAddress(${index})" class="text-green-600 hover:text-green-700" title="Set as default">
                                <i class="fas fa-star"></i>
                            </button>` : ''}
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function openAddressModal(addressIndex = -1) {
            editingAddressIndex = addressIndex;
            
            if (addressIndex >= 0) {
                const address = currentUser.addresses[addressIndex];
                document.getElementById('addressModalTitle').textContent = 'Edit Address';
                document.getElementById('addressLabel').value = address.label;
                document.getElementById('addressName').value = address.name;
                document.getElementById('addressStreet').value = address.street;
                document.getElementById('addressCity').value = address.city;
                document.getElementById('addressState').value = address.state;
                document.getElementById('addressZip').value = address.zip;
                document.getElementById('addressCountry').value = address.country;
                document.getElementById('addressPhone').value = address.phone || '';
                document.getElementById('addressDefault').checked = address.isDefault;
            } else {
                document.getElementById('addressModalTitle').textContent = 'Add New Address';
                document.getElementById('addressForm').reset();
                if (currentUser.name) {
                    document.getElementById('addressName').value = currentUser.name;
                }
            }
            
            document.getElementById('addressModal').classList.add('active');
        }

        function closeAddressModal() {
            document.getElementById('addressModal').classList.remove('active');
            editingAddressIndex = -1;
        }

        function saveAddress(e) {
            e.preventDefault();
            
            const address = {
                label: document.getElementById('addressLabel').value,
                name: document.getElementById('addressName').value,
                street: document.getElementById('addressStreet').value,
                city: document.getElementById('addressCity').value,
                state: document.getElementById('addressState').value,
                zip: document.getElementById('addressZip').value,
                country: document.getElementById('addressCountry').value,
                phone: document.getElementById('addressPhone').value,
                isDefault: document.getElementById('addressDefault').checked
            };

            if (!currentUser.addresses) {
                currentUser.addresses = [];
            }

            // If setting as default, remove default from others
            if (address.isDefault) {
                currentUser.addresses.forEach(addr => addr.isDefault = false);
            }

            // If this is the first address, make it default
            if (currentUser.addresses.length === 0) {
                address.isDefault = true;
            }

            if (editingAddressIndex >= 0) {
                currentUser.addresses[editingAddressIndex] = address;
            } else {
                currentUser.addresses.push(address);
            }

            updateUserInStorage();
            displayAddresses();
            closeAddressModal();
            showNotification(editingAddressIndex >= 0 ? 'Address updated' : 'Address added');
        }

        function editAddress(index) {
            openAddressModal(index);
        }

        function deleteAddress(index) {
            if (confirm('Are you sure you want to delete this address?')) {
                currentUser.addresses.splice(index, 1);
                
                // If deleted address was default and there are other addresses, make first one default
                if (currentUser.addresses.length > 0 && !currentUser.addresses.some(addr => addr.isDefault)) {
                    currentUser.addresses[0].isDefault = true;
                }
                
                updateUserInStorage();
                displayAddresses();
                showNotification('Address deleted');
            }
        }

        function setDefaultAddress(index) {
            currentUser.addresses.forEach((addr, i) => {
                addr.isDefault = i === index;
            });
            updateUserInStorage();
            displayAddresses();
            showNotification('Default address updated');
        }

        function updateUserInStorage() {
            const users = JSON.parse(localStorage.getItem('users')) || [];
            const userIndex = users.findIndex(u => u.id === currentUser.id);
            
            if (userIndex !== -1) {
                users[userIndex] = currentUser;
                localStorage.setItem('users', JSON.stringify(users));
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
            }
        }

        // Order Management Functions
        function displayOrders() {
            const container = document.getElementById('ordersList');
            
            if (!currentUser.orders || currentUser.orders.length === 0) {
                container.innerHTML = `
                    <div class="text-center py-8 text-gray-500">
                        <i class="fas fa-box text-4xl mb-4"></i>
                        <p>No orders yet</p>
                        <button onclick="closeProfileModal(); scrollToProducts()" class="mt-4 bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700 transition-colors">
                            Start Shopping
                        </button>
                    </div>
                `;
                return;
            }

            container.innerHTML = currentUser.orders.map(order => `
                <div class="border rounded-lg p-6">
                    <div class="flex justify-between items-start mb-4">
                        <div>
                            <h4 class="text-lg font-semibold">Order #${order.id}</h4>
                            <p class="text-gray-600">Placed on ${new Date(order.date).toLocaleDateString()}</p>
                        </div>
                        <div class="text-right">
                            <div class="text-lg font-bold">${order.total.toFixed(2)}</div>
                            <span class="order-status status-${order.status}">${order.status.charAt(0).toUpperCase() + order.status.slice(1)}</span>
                        </div>
                    </div>
                    
                    <div class="space-y-2 mb-4">
                        ${order.items.map(item => `
                            <div class="flex items-center gap-3 text-sm">
                                <div class="w-12 h-12 bg-cover bg-center rounded" style="background-image: url('${item.image}')"></div>
                                <div class="flex-1">
                                    <p class="font-medium">${item.name}</p>
                                    <p class="text-gray-600">Size: ${item.size}, Color: ${item.color}</p>
                                </div>
                                <div class="text-right">
                                    <p>Qty: ${item.quantity}</p>
                                    <p class="font-medium">${(item.price * item.quantity).toFixed(2)}</p>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                    
                    <div class="border-t pt-4">
                        <div class="flex justify-between items-center">
                            <div class="text-sm text-gray-600">
                                ${order.shippingAddress ? `Ship to: ${order.shippingAddress.name}, ${order.shippingAddress.city}` : ''}
                            </div>
                            <button onclick="trackOrder('${order.id}')" class="text-purple-600 hover:text-purple-700 text-sm">
                                Track Order
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function openOrderHistory() {
            document.getElementById('userDropdown').classList.add('hidden');
            openProfileModal();
            switchTab('orders');
        }

        function trackOrder(orderId) {
            // In a real app, this would show tracking information
            showNotification('Tracking information would be displayed here');
        }

        // Product Modal Functions
        function openProductModal(productId) {
            selectedProduct = products.find(p => p.id === productId);
            if (!selectedProduct) return;

            document.getElementById('modalProductName').textContent = selectedProduct.name;
            document.getElementById('modalProductPrice').textContent = `${selectedProduct.price}`;
            document.getElementById('modalProductDescription').textContent = selectedProduct.description;
            
            // Set product image - no image, just placeholder
            const imageContainer = document.getElementById('modalProductImage');
            imageContainer.style.backgroundImage = 'none';
            imageContainer.style.backgroundColor = '#f3f4f6';
            imageContainer.innerHTML = `
                <div class="text-center text-gray-400">
                    <i class="fas fa-image text-6xl mb-2"></i>
                    <p>Product Image</p>
                </div>
            `;

            // Populate sizes
            const sizeSelect = document.getElementById('modalProductSize');
            sizeSelect.innerHTML = '<option value="">Select Size</option>' + 
                selectedProduct.sizes.map(size => `<option value="${size}">${size}</option>`).join('');

            // Populate colors
            const colorsContainer = document.getElementById('modalProductColors');
            colorsContainer.innerHTML = selectedProduct.colors.map(color => `
                <button class="color-btn w-8 h-8 rounded-full border-2 border-gray-300 hover:border-red-500 transition-colors" 
                        style="background-color: ${getColorCode(color)}" 
                        data-color="${color}" 
                        title="${color}">
                </button>
            `).join('');

            // Add color selection event listeners
            document.querySelectorAll('.color-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.color-btn').forEach(b => b.classList.remove('ring-2', 'ring-red-500'));
                    this.classList.add('ring-2', 'ring-red-500');
                });
            });

            document.getElementById('productModal').classList.add('active');
        }

        function closeProductModal() {
            document.getElementById('productModal').classList.remove('active');
            selectedProduct = null;
        }

        function getColorCode(colorName) {
            const colorMap = {
                'Blue': '#3B82F6',
                'White': '#FFFFFF',
                'Pink': '#EC4899',
                'Black': '#000000',
                'Light Blue': '#93C5FD',
                'Cream': '#FFFBEB',
                'Floral Blue': '#DBEAFE',
                'Floral Pink': '#FCE7F3',
                'Gray': '#6B7280',
                'Navy': '#1E3A8A',
                'Brown': '#92400E',
                'Blue/White': 'linear-gradient(45deg, #3B82F6 50%, #FFFFFF 50%)',
                'Black/White': 'linear-gradient(45deg, #000000 50%, #FFFFFF 50%)',
                'Burgundy': '#7C2D12',
                'Red': '#EF4444',
                'Ivory': '#FFFBEB'
            };
            return colorMap[colorName] || '#9CA3AF';
        }

        // Cart Functions
        function quickAddToCart(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) return;

            const cartItem = {
                id: product.id,
                name: product.name,
                price: product.price,
                image: product.image,
                size: product.sizes[0],
                color: product.colors[0],
                quantity: 1
            };

            addToCart(cartItem);
            showNotification('Product added to cart!');
        }

        function addToCartFromModal() {
            if (!selectedProduct) return;

            const size = document.getElementById('modalProductSize').value;
            const selectedColorBtn = document.querySelector('.color-btn.ring-2');
            
            if (!size) {
                showNotification('Please select a size', 'error');
                return;
            }
            
            if (!selectedColorBtn) {
                showNotification('Please select a color', 'error');
                return;
            }

            const cartItem = {
                id: selectedProduct.id,
                name: selectedProduct.name,
                price: selectedProduct.price,
                image: selectedProduct.image,
                size: size,
                color: selectedColorBtn.dataset.color,
                quantity: 1
            };

            addToCart(cartItem);
            showNotification('Product added to cart!');
            closeProductModal();
        }

        function addToCart(item) {
            const existingItem = cart.find(cartItem => 
                cartItem.id === item.id && 
                cartItem.size === item.size && 
                cartItem.color === item.color
            );

            if (existingItem) {
                existingItem.quantity += item.quantity;
            } else {
                cart.push(item);
            }

            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartCount();
        }

        function removeFromCart(index) {
            cart.splice(index, 1);
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartCount();
            displayCartItems();
        }

        function updateCartQuantity(index, newQuantity) {
            if (newQuantity <= 0) {
                removeFromCart(index);
                return;
            }
            
            cart[index].quantity = newQuantity;
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartCount();
            displayCartItems();
        }

        function updateCartCount() {
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            document.getElementById('cartCount').textContent = totalItems;
        }

        function openCartModal() {
            displayCartItems();
            document.getElementById('cartModal').classList.add('active');
        }

        function closeCartModal() {
            document.getElementById('cartModal').classList.remove('active');
        }

        function displayCartItems() {
            const container = document.getElementById('cartItems');
            
            if (cart.length === 0) {
                container.innerHTML = `
                    <div class="text-center py-8">
                        <i class="fas fa-shopping-cart text-gray-400 text-6xl mb-4"></i>
                        <p class="text-gray-500">Your cart is empty</p>
                    </div>
                `;
                document.getElementById('cartTotal').textContent = '0.00';
                return;
            }

            container.innerHTML = cart.map((item, index) => `
                <div class="flex items-center gap-4 py-4 border-b">
                    <div class="w-16 h-16 bg-cover bg-center rounded" style="background-image: url('${item.image}')"></div>
                    <div class="flex-1">
                        <h4 class="font-semibold">${item.name}</h4>
                        <p class="text-sm text-gray-600">Size: ${item.size}, Color: ${item.color}</p>
                        <p class="text-purple-600 font-semibold">${item.price}</p>
                    </div>
                    <div class="flex items-center gap-2">
                        <button onclick="updateCartQuantity(${index}, ${item.quantity - 1})" class="w-8 h-8 flex items-center justify-center bg-gray-200 rounded hover:bg-gray-300">
                            <i class="fas fa-minus text-xs"></i>
                        </button>
                        <span class="w-8 text-center">${item.quantity}</span>
                        <button onclick="updateCartQuantity(${index}, ${item.quantity + 1})" class="w-8 h-8 flex items-center justify-center bg-gray-200 rounded hover:bg-gray-300">
                            <i class="fas fa-plus text-xs"></i>
                        </button>
                    </div>
                    <button onclick="removeFromCart(${index})" class="text-red-500 hover:text-red-700 ml-4">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
            `).join('');

            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            document.getElementById('cartTotal').textContent = total.toFixed(2);
        }

        // Checkout Functions
        function openCheckoutModal() {
            if (cart.length === 0) {
                showNotification('Your cart is empty', 'error');
                return;
            }

            closeCartModal();
            displayCheckoutItems();
            
            if (currentUser) {
                showLoggedInCheckout();
            } else {
                showGuestCheckoutOptions();
            }
            
            document.getElementById('checkoutModal').classList.add('active');
        }

        function closeCheckoutModal() {
            document.getElementById('checkoutModal').classList.remove('active');
            resetCheckoutForm();
        }

        function resetCheckoutForm() {
            document.getElementById('checkoutForm').reset();
            document.getElementById('guestCheckoutSection').classList.remove('hidden');
            document.getElementById('shippingForm').classList.add('hidden');
            document.getElementById('savedAddressesSection').classList.add('hidden');
            document.getElementById('createAccountSection').classList.add('hidden');
            document.getElementById('passwordSection').classList.add('hidden');
            document.getElementById('placeOrderBtn').disabled = true;
        }

        function showGuestCheckoutOptions() {
            document.getElementById('guestCheckoutSection').classList.remove('hidden');
            document.getElementById('shippingForm').classList.add('hidden');
            document.getElementById('savedAddressesSection').classList.add('hidden');
        }

        function showLoggedInCheckout() {
            document.getElementById('guestCheckoutSection').classList.add('hidden');
            
            if (currentUser.addresses && currentUser.addresses.length > 0) {
                showSavedAddresses();
            } else {
                showNewAddressForm();
            }
        }

        function showSavedAddresses() {
            document.getElementById('savedAddressesSection').classList.remove('hidden');
            document.getElementById('shippingForm').classList.add('hidden');
            
            const container = document.getElementById('savedAddressesList');
            container.innerHTML = currentUser.addresses.map((address, index) => `
                <div class="border rounded-lg p-4 cursor-pointer hover:border-purple-500 transition-colors ${address.isDefault ? 'border-purple-500 bg-purple-50' : 'border-gray-200'}" 
                     onclick="selectAddress(${index})">
                    <div class="flex items-start gap-3">
                        <input type="radio" name="selectedAddress" value="${index}" ${address.isDefault ? 'checked' : ''} 
                               onchange="updatePlaceOrderButton()">
                        <div class="flex-1">
                            <div class="flex items-center gap-2 mb-1">
                                <span class="font-medium">${address.label}</span>
                                ${address.isDefault ? '<span class="text-xs bg-purple-600 text-white px-2 py-1 rounded">Default</span>' : ''}
                            </div>
                            <p class="text-sm text-gray-600">
                                ${address.name}<br>
                                ${address.street}<br>
                                ${address.city}, ${address.state} ${address.zip}
                            </p>
                        </div>
                    </div>
                </div>
            `).join('');
            
            document.getElementById('placeOrderBtn').disabled = false;
        }

        function selectAddress(index) {
            document.querySelector(`input[name="selectedAddress"][value="${index}"]`).checked = true;
            updatePlaceOrderButton();
        }

        function showNewAddressForm() {
            document.getElementById('shippingForm').classList.remove('hidden');
            document.getElementById('savedAddressesSection').classList.add('hidden');
            document.getElementById('guestCheckoutSection').classList.add('hidden');
            
            if (currentUser) {
                // Pre-fill with user data
                const nameParts = currentUser.name.split(' ');
                document.getElementById('checkoutFirstName').value = nameParts[0] || '';
                document.getElementById('checkoutLastName').value = nameParts.slice(1).join(' ') || '';
                document.getElementById('checkoutEmail').value = currentUser.email;
                document.getElementById('checkoutPhone').value = currentUser.phone || '';
            }
            
            // Add event listeners to form fields for validation
            document.querySelectorAll('#checkoutForm input[required]').forEach(input => {
                input.addEventListener('input', updatePlaceOrderButton);
            });
        }

        function showGuestCheckoutForm() {
            document.getElementById('shippingForm').classList.remove('hidden');
            document.getElementById('guestCheckoutSection').classList.add('hidden');
            document.getElementById('createAccountSection').classList.remove('hidden');
            
            // Add event listeners to form fields for validation
            document.querySelectorAll('#checkoutForm input[required]').forEach(input => {
                input.addEventListener('input', updatePlaceOrderButton);
            });
        }

        function togglePasswordSection() {
            const createAccount = document.getElementById('createAccount').checked;
            const passwordSection = document.getElementById('passwordSection');
            
            if (createAccount) {
                passwordSection.classList.remove('hidden');
                document.getElementById('checkoutPassword').setAttribute('required', 'required');
            } else {
                passwordSection.classList.add('hidden');
                document.getElementById('checkoutPassword').removeAttribute('required');
            }
            
            updatePlaceOrderButton();
        }

        function updatePlaceOrderButton() {
            const placeOrderBtn = document.getElementById('placeOrderBtn');
            let isValid = false;
            
            if (currentUser && document.getElementById('savedAddressesSection').classList.contains('hidden') === false) {
                // User with saved addresses
                isValid = document.querySelector('input[name="selectedAddress"]:checked') !== null;
            } else if (document.getElementById('shippingForm').classList.contains('hidden') === false) {
                // New address form
                const requiredFields = document.querySelectorAll('#checkoutForm input[required]');
                isValid = Array.from(requiredFields).every(field => field.value.trim() !== '');
            }
            
            placeOrderBtn.disabled = !isValid;
        }

        function displayCheckoutItems() {
            const container = document.getElementById('checkoutItems');
            
            container.innerHTML = cart.map(item => `
                <div class="flex items-center gap-3 py-2">
                    <div class="w-12 h-12 bg-cover bg-center rounded" style="background-image: url('${item.image}')"></div>
                    <div class="flex-1">
                        <h4 class="font-medium text-sm">${item.name}</h4>
                        <p class="text-xs text-gray-600">Size: ${item.size}, Color: ${item.color}</p>
                    </div>
                    <div class="text-right">
                        <p class="text-sm">Qty: ${item.quantity}</p>
                        <p class="font-medium text-sm">${(item.price * item.quantity).toFixed(2)}</p>
                    </div>
                </div>
            `).join('');

            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const shipping = 9.99;
            const tax = subtotal * 0.08; // 8% tax
            const total = subtotal + shipping + tax;

            document.getElementById('checkoutSubtotal').textContent = subtotal.toFixed(2);
            document.getElementById('checkoutShipping').textContent = shipping.toFixed(2);
            document.getElementById('checkoutTax').textContent = tax.toFixed(2);
            document.getElementById('checkoutTotal').textContent = total.toFixed(2);
        }

        function placeOrder() {
            const orderData = gatherOrderData();
            
            if (!orderData) {
                showNotification('Please fill in all required fields', 'error');
                return;
            }

            // Create order
            const order = {
                id: Date.now().toString(),
                date: new Date().toISOString(),
                items: [...cart],
                shippingAddress: orderData.shippingAddress,
                subtotal: parseFloat(document.getElementById('checkoutSubtotal').textContent),
                shipping: parseFloat(document.getElementById('checkoutShipping').textContent),
                tax: parseFloat(document.getElementById('checkoutTax').textContent),
                total: parseFloat(document.getElementById('checkoutTotal').textContent),
                status: 'pending',
                customerEmail: orderData.email
            };

            // Handle guest account creation
            if (orderData.createAccount && !currentUser) {
                createGuestAccount(orderData);
            }

            // Add order to user's order history
            if (currentUser) {
                if (!currentUser.orders) {
                    currentUser.orders = [];
                }
                currentUser.orders.unshift(order);
                updateUserInStorage();
            }

            // Clear cart
            cart = [];
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartCount();

            // Close checkout modal
            closeCheckoutModal();

            // Show success message and redirect to WhatsApp
            showNotification('Order placed successfully!');
            sendOrderToWhatsApp(order);
        }

        function gatherOrderData() {
            if (currentUser && document.querySelector('input[name="selectedAddress"]:checked')) {
                // Using saved address
                const selectedIndex = document.querySelector('input[name="selectedAddress"]:checked').value;
                return {
                    shippingAddress: currentUser.addresses[selectedIndex],
                    email: currentUser.email,
                    createAccount: false
                };
            } else if (!document.getElementById('shippingForm').classList.contains('hidden')) {
                // Using new address form
                const requiredFields = ['checkoutFirstName', 'checkoutLastName', 'checkoutEmail', 
                                      'checkoutPhone', 'checkoutStreet', 'checkoutCity', 
                                      'checkoutState', 'checkoutZip', 'checkoutCountry'];
                
                // Check if all required fields are filled
                for (const fieldId of requiredFields) {
                    if (!document.getElementById(fieldId).value.trim()) {
                        return null;
                    }
                }

                const shippingAddress = {
                    name: `${document.getElementById('checkoutFirstName').value} ${document.getElementById('checkoutLastName').value}`,
                    street: document.getElementById('checkoutStreet').value,
                    city: document.getElementById('checkoutCity').value,
                    state: document.getElementById('checkoutState').value,
                    zip: document.getElementById('checkoutZip').value,
                    country: document.getElementById('checkoutCountry').value,
                    phone: document.getElementById('checkoutPhone').value
                };

                return {
                    shippingAddress,
                    email: document.getElementById('checkoutEmail').value,
                    createAccount: document.getElementById('createAccount') ? document.getElementById('createAccount').checked : false,
                    password: document.getElementById('checkoutPassword') ? document.getElementById('checkoutPassword').value : ''
                };
            }
            
            return null;
        }

        function createGuestAccount(orderData) {
            if (!orderData.password) return;

            const nameParts = orderData.shippingAddress.name.split(' ');
            const newUser = {
                id: Date.now().toString(),
                email: orderData.email,
                password: orderData.password,
                name: orderData.shippingAddress.name,
                phone: orderData.shippingAddress.phone,
                birthdate: '',
                addresses: [{
                    label: 'Home',
                    ...orderData.shippingAddress,
                    isDefault: true
                }],
                orders: [],
                createdAt: new Date().toISOString()
            };

            const users = JSON.parse(localStorage.getItem('users')) || [];
            users.push(newUser);
            localStorage.setItem('users', JSON.stringify(users));
            
            currentUser = newUser;
            localStorage.setItem('currentUser', JSON.stringify(currentUser));
            updateAuthButton();
            
            showNotification('Account created successfully!');
        }

        function sendOrderToWhatsApp(order) {
            const message = `Hello! I'd like to place an order:\n\nOrder #${order.id}\n\n` +
                          `Items:\n${order.items.map(item => 
                              `- ${item.name} (${item.size}, ${item.color}) x${item.quantity} - ${(item.price * item.quantity).toFixed(2)}`
                          ).join('\n')}\n\n` +
                          `Shipping Address:\n${order.shippingAddress.name}\n${order.shippingAddress.street}\n` +
                          `${order.shippingAddress.city}, ${order.shippingAddress.state} ${order.shippingAddress.zip}\n` +
                          `${order.shippingAddress.country}\nPhone: ${order.shippingAddress.phone}\n\n` +
                          `Total: ${order.total.toFixed(2)}`;

            const phone = '77081803991';
            const encodedMessage = encodeURIComponent(message);
            const url = `https://wa.me/${phone}?text=${encodedMessage}`;
            window.open(url, '_blank');
        }

        // Utility Functions
        function scrollToProducts() {
            document.getElementById('products').scrollIntoView({ behavior: 'smooth' });
        }

        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 z-50 px-6 py-3 rounded-lg text-white font-semibold transform translate-x-full transition-transform duration-300 ${
                type === 'success' ? 'bg-green-500' : 'bg-red-500'
            }`;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.classList.remove('translate-x-full');
            }, 100);
            
            setTimeout(() => {
                notification.classList.add('translate-x-full');
                setTimeout(() => {
                    if (document.body.contains(notification)) {
                        document.body.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }

        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth' });
                }
            });
        });
    </script>
</body>
</html>
